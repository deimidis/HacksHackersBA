<!doctype html>
<html>
  <head>

    <script src="javascript/popcorn.js"></script>
    <script src="javascript/jquery-1.6.1.min.js"></script>

    <script>
    function change_text(video, options) {
       	$('#right').html(options.html)
    }

    function clear_text(video, options) {
       	$('#right').html("")
    }

    function populate(pop, elements) {
	for(element in elements) {
	    pop.interventor(elements[element]);
	}
    }

    (function(Popcorn) {
	  Popcorn.plugin( "interventor" , function( options ) {

	    return {
	      start: function( event, options ) {
		if(options.callback) {
		    options.callback(this, options);
		} 
	      },
	      end: function( event, options ) {
		if (options.endcallback) {
		    options.endcallback(this, options);
                } else {
		    clear_text(this, options)
		}
	      }
	    };
	  });
	    
	})(Popcorn);

    // ensure the DOM has loaded
    document.addEventListener("DOMContentLoaded", function () {

      // Create a popcporn instance by calling Popcorn("#id-of-my-video")
      var pop = Popcorn("#video");
      populate(pop, elements);
    }, false);

    elements = [
	{
	    start: 2,
	    end: 5,
	    callback: change_text,
	    html: "una historia en <strong>HT&Ntilde;L5</strong>"
	},
	{
	    start: 10,
	    end: 12,
	    callback: change_text,
	    html: "amigos"
	},
	{
	    start: 25,
	    end: 27,
	    callback: change_text,
	    html: "personalizar!"
	}
    ]
    console.log(elements);
    </script>
  </head>
  <body>

    <video id="video" controls style="float:left">
      <source src="./html.webm"></source>
    </video>

    <div id="right" style="float:left;height:300px"> </div>
    
  </body>
</html>


